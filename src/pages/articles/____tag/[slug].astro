---
import Container from "../../../components/Container.astro";
import Layout from "../../../layouts/Layout.astro";
import TagList from "../../../components/TagList.astro";
import { newtClient } from "../../../libs/newt";
import type { Tag } from "../../../libs/newt";
import Archive from "../../../components/ArchiveList.astro";
import SectionTitle from "../../../components/SectionTitle.astro";
import PageBody from "../../../components/PageBody.astro";
import PageTitle from "../../../components/PageTitle.astro";
export const getStaticPaths = async () => {
  const { items: tags } = await newtClient.getContents<Tag>({
    appUid: "blog",
    modelUid: "tag",
    query: {
      select: ["_id", "slug", "name"],
    },
  });

  return tags.map((tag) => ({
    params: { slug: tag.slug },
    props: { tag },
  }));
};

const { tag } = Astro.props;
const tagId = tag._id;
---

<Layout>
  <PageTitle ja={tag.name} />
  <PageBody>
    <Container>
      <TagList />
      <Archive tags={tagId} classNames="-col3" />
    </Container>
  </PageBody>
</Layout>
